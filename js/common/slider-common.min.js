/*! slider-common 2015-12-10 */
define(function(require,exports,module){function SliderCommon(){}var $=require("jquery");SliderCommon.prototype.curIndex=0,SliderCommon.prototype.option={container:"#slider",index:0,auto:!0,time:5e3,leftNav:"",rightNav:"",isPointerNav:!1,inLineNav:!1,bannerPointerClass:"direct-banner-pointer",afterSlide:null,whichPage:1,effect:"slide",outNav:!1},SliderCommon.prototype.init=function(){var _this=this;this.option.outNav?(this.container.siblings(this.option.rightNav).unbind("click").bind("click",function(){_this.slideRight()}),this.container.siblings(this.option.leftNav).unbind("click").bind("click",function(){_this.slideLeft()})):(this.container.find(this.option.rightNav).unbind("click").bind("click",function(){_this.slideRight()}),this.container.find(this.option.leftNav).unbind("click").bind("click",function(){_this.slideLeft()}))},SliderCommon.prototype.render=function(op){if(this.option=$.extend(!1,this.option,op),this.container=$(this.option.container),"infinite"==this.option.effect){var lilen=this.container.children("ul").children("li").size(),parentwidth=this.container.width();if(lilen>1){var newfirstli=this.container.children("ul").children("li").eq(0).clone(!0),newlastli=this.container.children("ul").children("li").eq(lilen-1).clone(!0);newfirstli.appendTo(this.container.children("ul")),newlastli.prependTo(this.container.children("ul")),this.eachliwidth=parentwidth,this.container.children("ul").css("width",this.eachliwidth*(lilen+2))}}if(this.len=this.container.children("ul").children("li").size(),!(this.len<=1)){var _this=this;if(this.option.outNav||this.container.hover(function(){$(this).find(_this.option.leftNav).show(),$(this).find(_this.option.rightNav).show()},function(){$(this).find(_this.option.leftNav).hide(),$(this).find(_this.option.rightNav).hide()}),this.init(),this.option.auto&&this.autoSlide(),this.option.isPointerNav){for(var banner_pointer=$("<div class='"+this.option.bannerPointerClass+"'></div>"),$ul=$("<ul></ul>"),i=0;i<this.len;i++){var $li=$("<li></li>");i==this.option.index?$li.addClass("cur").appendTo($ul):$li.appendTo($ul),$li.bind("click",function(){var i=$(this).index();clearInterval(_this.sliderTimer),_this.slide(i)})}$ul.addClass("clearfix").appendTo(banner_pointer);var l=-(20*this.len+2)/2;this.option.inLineNav||banner_pointer.css("marginLeft",l+"px"),banner_pointer.appendTo(this.container)}"infinite"==this.option.effect?this.slide(this.option.whichPage):this.slide(this.option.index)}},SliderCommon.prototype.slide=function(i){var slider=this.container.children("ul"),_this=this;if(!slider.is(":animated")&&!slider.children("li").is(":animated")){if("slide"==this.option.effect){var l=-this.container.width()*i;slider.animate({left:l+"px"})}else if("fade"==this.option.effect)slider.children("li").eq(this.curIndex).fadeOut(),slider.children("li").eq(i).fadeIn();else if("infinite"==this.option.effect){0==_this.curIndex&&i==_this.len-1&&(_this.container.children("ul").css("left",-(_this.len-2)*_this.eachliwidth),i=_this.len-3),_this.curIndex==_this.len-1&&0==i&&(_this.container.children("ul").css("left",-_this.eachliwidth),i=2);var l=-this.container.width()*i;slider.animate({left:l+"px"})}if(this.option.isPointerNav){var sliderPointer=this.container.children("."+this.option.bannerPointerClass).find("ul li");sliderPointer.removeClass("cur"),sliderPointer.eq(i).addClass("cur")}this.curIndex=i,this.option.afterSlide&&this.option.afterSlide()}},SliderCommon.prototype.slideLeft=function(){var nextIndex;nextIndex=this.curIndex>0?this.curIndex-1:this.len-1,clearInterval(this.sliderTimer),this.sliderTimer=null,this.slide(nextIndex)},SliderCommon.prototype.slideRight=function(){var nextIndex;nextIndex=this.curIndex<this.len-1?this.curIndex+1:0,clearInterval(this.sliderTimer),this.sliderTimer=null,this.slide(nextIndex)},SliderCommon.prototype.autoSlide=function(){var _this=this;this.sliderTimer=setInterval(function(){var nextIndex;nextIndex=_this.curIndex<_this.len-1?_this.curIndex+1:0,_this.slide(nextIndex)},_this.option.time)},module.exports=SliderCommon});